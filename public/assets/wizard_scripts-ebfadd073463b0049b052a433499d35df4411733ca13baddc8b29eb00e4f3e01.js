(function(){var t,e,a,r,s,n,c,i,l,o;t={START:"start",GENERATELIST:"generate list",FINAL:"final"},o=t.START,s=1,e=[],c=function(t){return $("#"+t).remove()},window.process_call_ajax=function(t,e){return $.ajax({type:"GET",url:"/process_modules/"+t+"/get_list_ajax.json",data:{id:t},success:function(t){return n($("#list_process_chain"),t,e)},errors:function(t){return alert("error")}})},n=function(e,r,s){var n,c;return c=parseInt($(s).attr("data-level"),10),n=$(s).attr("id"),$("#list_process_chain [data-level='"+c+"'] #process_id").val(n),$("#list_process_chain").scrollTo(s),a(c),$.isEmptyObject(r)?(i(e,n),o=t.FINAL):(l(e,r),o=t.GENERATELIST)},i=function(t,a){var r,n,c,i;return c=a,(null===c||""===c)&&(c=$("#process_id").val()),r=$('<div class="col-xs-6 col-sm-4 col-md-3 col-md-2 value_chain">'),r.attr("data-level",s),n=$('<div class ="finish_process">'),i=$('<input type="submit" value="Finish"  class="btn btn-success"/>'),n.append(i),r.append(n),s++,e.push(r),t.append(r)},r=function(t,e,a){return"edit"===t?"/value_chains/create_ajax/"+e+"/"+a+"/edit":"/value_ chains/create_ajax/"+e+"/"+a+"/create"},l=function(t,a){var r,n,c,i;return n=$('<div class="col-md-3">'),n.attr("data-level",s),r=$('<div class="list-group">'),r.attr("data-level",s),c=$('<ul class="list-unstyled">'),i=$('<input type="hidden" id="process_id" name="process[][id]">'),$.each(a,function(t,e){var a,r;return r=$("<li>"),a=$('<a href="#">'),a.text(e.description),a.attr("id",e.id),a.attr("data-level",s),a.attr("class","list-group-item"),a.attr("onclick","process_call_ajax("+e.id+", this)"),r.append(a),c.append(r)}),r.append(c),r.append(i),n.append(r),s++,e.push(n),$(t).append(n)},a=function(t){return e.forEach(function(e){var a;return a=parseInt($(e).attr("data-level"),10),a>t?$(e).remove():void 0})},$(function(){var t;0===$(".breadcrumb").length?$("#process_badge").text(0):$("#process_badge").text($(".breadcrumb").length),$("#value_chain_process").length&&process_call_ajax($("#process_id").val()),$("#value_chain_process a").click(function(t){return a(1)}),t=function(t){switch(t){case"step1":return $("#progressbar").width("0%");case"step2":return $("#progressbar").width("30%");case"step3":return $("#progressbar").width("50%");case"step4":return $("#progressbar").width("70%");case"step5":return $("#progressbar").width("100%")}},$('a[data-toggle="tab"]').click(function(e){var a;return a=$(e.target).attr("href"),t(a.substring(1,a.length))}),$(".next").click(function(){var e;return e=$(this).parents(".tab-pane").next().attr("id"),t(e),$("[href=#"+e+"]").tab("show")})})}).call(this);