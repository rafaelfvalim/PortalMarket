<%= render 'layouts/messages' %>
<div class="row wrapper border-bottom white-bg page-heading">
  <div class="row">
    <div class="col-md-12">
      <h1><%= t 'labels.admin_user.page_header'%> </h1>
    </div>
  </div>
  <hr>
  <br>
  <table class="table table-striped table-condensed responsive" id="master-user-table" data-source="<%= admin_user_ajax_users_path(format: :json) %>">
    <thead>
    <th>Id</th>
    <th><%= t 'labels.member_attributes.member_name' %></th>
    <th><%= t 'labels.member_attributes.company_name' %></th>
    <th>Email</th>
    <th>Status</th>
    <th>Confirmado?</th>
    <th></th>
    <th></th>
    </thead>
    <tbody>
    </tbody>
  </table>
  <%= will_paginate @users %>
  <% ActiveRecord::Base.default_timezone = :utc %>

  <div class="row">
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Users traffic
        </div>
        <div class="panel-body">
          <%= line_chart User.group_by_day(:current_sign_in_at).count %>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          Users Types
        </div>
        <div class="panel-body">
          <%= pie_chart User.joins(:member_type).group(:description).count %>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          Created Users
        </div>
        <div class="panel-body">
          <%= line_chart User.group_by_day(:created_at).count %>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          Updated Users
        </div>
        <div class="panel-body">
          <%= line_chart User.group_by_day(:updated_at).count %>
        </div>
      </div>
    </div>
  </div>
</div>