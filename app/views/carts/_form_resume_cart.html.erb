<div class="panel panel-default">
  <div class="panel-body">
    <%= form_tag controller: :invoices, action: :create do %>
        <div class="row-fluid">
          <div class="col-md-10">
            <%= link_to :back, class: 'btn btn-primary' do %>
                <i class="fa fa-chevron-left"> <%= t 'labels.buttons.back' %></i>
            <% end %>
            <% if carts.size > 0 %>
                <%= button_tag(type: "submit", class: "btn btn-success", id: "submit_invoice") do %>
                    <%= t 'labels.buttons.finalize' %>
                <% end %>
            <% end %>
          </div>
          <div class="col-md-2">
            <h5><b>Total: <%= get_total(carts) %></b></h5>
          </div>
          <br>

          <div class="row">
            <div class="col-md-12">
              <table class="table table-striped">
                <thead>
                <tr>
                  <th>Cod</th>
                  <th><%= t 'labels.script_attributes.name' %></th>
                  <th><%= t 'labels.script_attributes.description' %></th>
                  <th><%= t 'labels.script_attributes.platform' %></th>
                  <th><%= t 'labels.script_attributes.price' %></th>
                  <th><%= t 'labels.script_attributes.paper' %></th>
                  <th colspan="3"></th>
                </tr>
                </thead>
                <tbody>
                <% carts.each do |cart| %>
                    <tr>
                      <td> <%= cart.script.id %></td>
                      <td> <%= cart.script.name %></td>
                      <td> <%= cart.script.description %> </td>
                      <td> <%= cart.script.platform %> </td>
                      <td><%= cart.price.value %></td>
                      <td> <!-- Trigger the modal with a button -->
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#paperModal"><%= t 'labels.buttons.show_paper' %></button>
                      </td>
                      <td><%= link_to "#{t 'labels.buttons.remover'}", cart, method: :delete, data: {confirm: "#{t 'labels.are_you_sure'}"}, remote: true, class: 'btn btn-danger' %></td>
                      <%= hidden_field_tag 'cart[]', cart.id %>
                    </tr>
                    <!-- Modal -->
                    <%= render 'modal_paper', cart: cart %>
                <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
    <% end %>
  </div>
</div>